! -----------------------------------------------------------------------------
! ElmerFEM Circuit Generated: April 02, 2025
! -----------------------------------------------------------------------------

! -----------------------------------------------------------------------------
! Number of Circuits in Model
! -----------------------------------------------------------------------------
$ Circuits = 2

! -----------------------------------------------------------------------------
! CIRCUIT 1: HV
! -----------------------------------------------------------------------------

! General Parameters 
$ S1 = 100.0 ! Voltage amplitude at the primary

! Parameters in Component 1: HV
$ N_HV = 840	 ! Number of Turns
$ R_HV = 0	 ! Coil Resistance
$ Ns_HV = 1	 ! Sector/Symmetry Coefficient (e.g. 4 is 1/4 of the domain)

! -----------------------------------------------------------------------------
! Matrix Size Declaration and Matrix Initialization
! -----------------------------------------------------------------------------
$ C.1.variables = 5
$ C.1.perm = zeros(C.1.variables)
$ C.1.B = zeros(C.1.variables,C.1.variables)

! -----------------------------------------------------------------------------
! Dof/Unknown Vector Definition
! -----------------------------------------------------------------------------
$ C.1.name.1 = "i_S1"
$ C.1.name.2 = "i_component(1)"
$ C.1.name.3 = "v_S1"
$ C.1.name.4 = "v_component(1)"
$ C.1.name.5 = "u_2_circuit_1"

! -----------------------------------------------------------------------------
! Source Vector Definition
! -----------------------------------------------------------------------------
$ C.1.source.5 = "S1_Source"

! -----------------------------------------------------------------------------
! Matrix B in B*x = f
! -----------------------------------------------------------------------------

! -----------------------------------------------------------------------------
! KCL Equations
! -----------------------------------------------------------------------------
$ C.1.B(0,0) = -1
$ C.1.B(0,1) = 1

! -----------------------------------------------------------------------------
! KVL Equations
! -----------------------------------------------------------------------------
$ C.1.B(1,2) = 1
$ C.1.B(1,4) = -1
$ C.1.B(2,3) = -1
$ C.1.B(2,4) = 1

! -----------------------------------------------------------------------------
! Component Equations
! -----------------------------------------------------------------------------
$ C.1.B(4,2) = 1


! -----------------------------------------------------------------------------
! CIRCUIT 2
! -----------------------------------------------------------------------------

! General Parameters (change for short-circuit or load test).
! Short circuit: Rl = 0 and Ll = 0
$ Rl = 0.001
$ Ll = 0.0001

! Parameters in Component 2: LV
$ N_LV = 7 ! Number of Turns
$ R_LV = 0 ! Coil Resistance
$ Ns_LV = 1 ! Sector/Symmetry Coefficient (e.g. 4 is 1/4 of the domain)

! -----------------------------------------------------------------------------
! Matrix Size Declaration and Matrix Initialization
! -----------------------------------------------------------------------------
$ C.2.variables = 8
$ C.2.perm = zeros(C.2.variables)
$ C.2.A = zeros(C.2.variables,C.2.variables)
$ C.2.B = zeros(C.2.variables,C.2.variables)

! -----------------------------------------------------------------------------
! Dof/Unknown Vector Definition. Matrix B in A*dxdt+B*x = f
! -----------------------------------------------------------------------------
$ C.2.name.1 = "i_component(2)"
$ C.2.name.2 = "i_Rl"
$ C.2.name.3 = "i_Ll"
$ C.2.name.4 = "v_component(2)"
$ C.2.name.5 = "v_Rl"
$ C.2.name.6 = "v_Ll"
$ C.2.name.7 = "u_2_circuit_2"
$ C.2.name.8 = "u_3_circuit_2"

! -----------------------------------------------------------------------------
! KCL Equations
! -----------------------------------------------------------------------------
$ C.2.B(0,0) = -1
$ C.2.B(0,1) = 1
$ C.2.B(1,1) = -1
$ C.2.B(1,2) = 1

! -----------------------------------------------------------------------------
! KVL Equations
! -----------------------------------------------------------------------------
$ C.2.B(2,3) = -1
$ C.2.B(2,6) = -1
$ C.2.B(4,5) = -1
$ C.2.B(4,7) = 1

! -----------------------------------------------------------------------------
! Component Equations
! -----------------------------------------------------------------------------
$ C.2.B(5,4) = -1
$ C.2.B(5,6) = 1
$ C.2.B(5,7) = -1
$ C.2.B(6,1) = Rl
$ C.2.B(6,4) = -1
$ C.2.B(7,5) = 1

! -----------------------------------------------------------------------------
! Matrix A in A*dxdt+B*x = f
! -----------------------------------------------------------------------------

$ C.2.A(7,2) = -Ll


! -----------------------------------------------------------------------------
! End of Circuit
! -----------------------------------------------------------------------------
